ungroup()
index.returns
# Turn that to xts to use Performance Analytics
# tbl_xts(., cols_to_xts = Returns, spread_by = Benchmark)
?PerformanceAnalytics::Return.excess
excess.return.series <- index.returns-benchmark.returns
excess.return.series <- index.returns$Returns-benchmark.returns$Returns
excess.return.series
df <- data.frame(
Index1_Return = c(0.02, 0.03, 0.01, 0.04, 0.02),
Index2_Return = c(0.01, 0.02, 0.03, 0.02, 0.01),
Benchmark1_Return = c(0.01, 0.02, 0.02, 0.03, 0.01),
Benchmark2_Return = c(0.02, 0.01, 0.03, 0.02, 0.01)
)
# Calculate the excess return series for each pair of index and benchmark
excess_return_series <- mapply(function(index_ret, bench_ret) {
index_ret - bench_ret
}, df$Index1_Return, df$Benchmark1_Return, df$Index2_Return, df$Benchmark2_Return)
excess.return <- function(index_df, benchmark_df, index_name, benchmark_name){
Date <- index_df$Date
Xreturn <- index_df[[index_name]] - benchmark_df[[benchmark_name]]
Names <- paste0("Excess of ", index_name)
xdf <- data.frame(Date = Date, Names = Names, Xreturn = Xreturn)
return(xdf)
}
index_df <- data.frame(
Date = seq(as.Date("2023-01-01"), as.Date("2023-01-05"), by = "days"),
Index_Return = c(0.02, 0.03, 0.01, 0.04, 0.02)
)
benchmark_df <- data.frame(
Date = seq(as.Date("2023-01-01"), as.Date("2023-01-05"), by = "days"),
Benchmark_Return = c(0.01, 0.02, 0.02, 0.03, 0.01)
)
# Calculate excess returns for index and benchmark using the function
excess_returns <- excess.return(index_df, benchmark_df, "Index_Return", "Benchmark_Return")
print(excess_returns)
#  lets create a list of indexes and their benchmark names
index.returns %>% names(Index)
#  lets create a list of indexes and their benchmark names
index.returns %>% names()
#  lets create a list of indexes and their benchmark names
index.returns %>% names(.$Value)
index.returns$Value %>% names() %>% pull()
#  lets create a list of indexes and their benchmark names
index.returns$Value %>% names()
#  lets create a list of indexes and their benchmark names
index.returns %>% unique(index.returns$Value)
#  lets create a list of indexes and their benchmark names
index.returns %>% distinct(Value)
#  lets create a list of indexes and their benchmark names
index.returns %>% distinct(Index)
#  lets create a list of indexes and their benchmark names
index.returns %>% distinct(Index) %>% pull()
#  lets create a list of indexes and their benchmark names
index.names <- index.returns %>% distinct(Index) %>% pull()
benchmark.names <- benchmark.returns %>% distinct(Benchmarks) %>% pull()
benchmark.names <- benchmark.returns %>% distinct(Benchmark) %>% pull()
benchmark.names
index.returns <- indexes %>%  gather(Index, Value, -Date) %>%
group_by(Index) %>%
arrange(Date) %>%
mutate(Returns = Value/ lag(Value)-1) %>%
mutate(Returns = coalesce(Returns, 0)) %>%
ungroup() %>%
# Turn that to xts to use Performance Analytics
tbl_xts(., cols_to_xts = Returns, spread_by = Index)
index.returns
excess_returns_list <- lapply(1:length(index_names), function(i) {
excess.return(index_df[[i]], benchmark_df[[i]], index_names[i], benchmark_names[i])
})
index.names <- index.returns %>% distinct(Index) %>% pull()
pacman::p_load("xts", "tidyverse", "tbl2xts", "PerformanceAnalytics",
"lubridate", "glue")
library(lubridate)
data<- readxl::read_xlsx("data/Benckmarks.xlsx")
indexes <- data %>%
select(Date, FUDP,M2EFDY, GDUEEGF)
Benchmarks <- data %>% select(Date, FUDP, TUKXG, M2GBDY)
index.returns <- indexes %>%  gather(Index, Value, -Date) %>%
group_by(Index) %>%
arrange(Date) %>%
mutate(Returns = Value/ lag(Value)-1) %>%
mutate(Returns = coalesce(Returns, 0)) %>%
ungroup() %>%
# Turn that to xts to use Performance Analytics
tbl_xts(., cols_to_xts = Returns, spread_by = Index)
benchmark.returns <- Benchmarks %>%  gather(Benchmark, Value, -Date) %>%
group_by(Benchmark) %>%
arrange(Date) %>%
mutate(Returns = Value/ lag(Value)-1) %>%
mutate(Returns = coalesce(Returns, 0)) %>%
ungroup() %>%
# Turn that to xts to use Performance Analytics
tbl_xts(., cols_to_xts = Returns, spread_by = Benchmark)
excess.return <- function(index_df, benchmark_df, index_name, benchmark_name){
Date <- index_df$Date
Xreturn <- index_df[[index_name]] - benchmark_df[[benchmark_name]]
Names <- paste0("Excess of ", index_name)
xdf <- data.frame(Date = Date, Names = Names, Xreturn = Xreturn)
return(xdf)
}
index.names <- index.returns %>% distinct(Index) %>% pull()
index.returns %>% names()
index.names <- index.returns %>% names() %>% pull()
index.names <- index.returns %>% names()
index.names <- index.returns %>% names()
benchmark.names <- benchmark.returns %>% names()
excess_returns_list <- lapply(1:length(index_names), function(i) {
excess.return(index.returns[[i]], benchmark.returns[[i]], index_names[i], benchmark_names[i])
})
excess_returns_list <- lapply(1:length(index_names), function(i) {
excess.return(index.returns[[i]], benchmark.returns[[i]], index.names[i], benchmark.names[i])
})
excess_returns_list <- lapply(1:length(index.names), function(i) {
excess.return(index.returns[[i]], benchmark.returns[[i]], index.names[i], benchmark.names[i])
})
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
rename(Index = "index_name", Benchmark = "benchmark_name")}
df <- readxl::read_xlsx("data/MAD .xlsx")
df <- readxl::read_xlsx("data/MAD .xlsx")
library(tidyverse)
df %>%
distinct(.,)
df %>%
distinct(.,) %>% names()
df %>% part(., FUDP, M2EFDY)
df %>% part(., "FUDP", "M2EFDY")
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name)}
df %>% part(., "FUDP", "M2EFDY")
df %>% part(., "FUDP", "M2EFDY")
df %>% part(., "FUDP", "M2EFDY")
b <- df %>% part(., "FUDP", "M2EFDY")
View(b)
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>%
mutate(Return = Index / lag(Index)) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
mutate(Excess_Return = Index - Benchmark) %>%
mutate(YM = format(index, "%Y-%b")) %>%
group_by(YM) %>%
filter(index == last(index)) %>%
mutate(Cumulative_Excess_Return = cumprod(1 + Excess_Return))
df}
b <- df %>% part(., "FUDP", "M2EFDY")
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>%
mutate(Return = Index / lag(Index)) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
mutate(Excess_Return = Index - Benchmark) %>%
mutate(YM = format(index, "%Y-%b")) %>%
group_by(YM) %>%
filter(Date == last(Date)) %>%
mutate(Cumulative_Excess_Return = cumprod(1 + Excess_Return))
df}
b <- df %>% part(., "FUDP", "M2EFDY")
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>%
mutate(Return = Index / lag(Index)) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
mutate(Excess_Return = Index - Benchmark) %>%
mutate(YM = format(Date, "%Y-%b")) %>%
group_by(YM) %>%
filter(Date == last(Date)) %>%
mutate(Cumulative_Excess_Return = cumprod(1 + Excess_Return))
df}
b <- df %>% part(., "FUDP", "M2EFDY")
View(b)
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl() %>%
mutate(Excess_Return = Index - Benchmark) %>%
mutate(YM = format(Date, "%Y-%b")) %>%
group_by(YM) %>%
filter(Date == last(Date)) %>%
mutate(Cumulative_Excess_Return = cumprod(1 + Excess_Return))
df}
b <- df %>% part(., "FUDP", "M2EFDY")
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl() %>%
mutate(Excess_Return = Index - Benchmark)
b <- df %>% part(., "FUDP", "M2EFDY")
df %>% part(., "FUDP", "M2EFDY"
df %>% part(., "FUDP", "M2EFDY")
df %>% part(., "FUDP", "M2EFDY")
df %>% part(., "FUDP", "M2EFDY")
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl()
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl()
# mutate(Excess_Return = Index - Benchmark) %>%
# mutate(YM = format(Date, "%Y-%b")) %>%
# group_by(YM) %>%
# filter(Date == last(Date)) %>%
# mutate(Cumulative_Excess_Return = cumprod(1 + Excess_Return))
df}
b <- df %>% part(., "FUDP", "M2EFDY")
b
df %>% part(., "FUDP", "M2EFDY")
function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df
}
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = replace(Return, is.na(Return), 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df
}
df %>% part(., "FUDP", "M2EFDY")
View(part)
part  <-  function(df, index_name, benchmark_name) {
df = df %>%
dplyr::rename(Index = index_name, Benchmark = benchmark_name) %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df
}
b <- df %>% part(., "FUDP", "M2EFDY")
b
# names
df %>%
distinct(.,) %>% names()
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
A <- df %>%
dplyr::rename(Index = "FUDP", Benchmark = "M2EFDY") %>%
select(Date, Index, Benchmark) %>% gather(Vehicle, Value, -Date) %>%
mutate(Return = Value / lag(Value)-1) %>%
mutate(Return = coalesce(Return, 0)) %>%
tbl2xts::tbl_xts(.,cols_to_xts = Value, spread_by = Vehicle ) %>%
tbl2xts::xts_tbl
